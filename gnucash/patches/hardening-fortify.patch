Author: Dmitry Smirnov <onlyjob@member.fsf.org>
Last-Update: 2012-06-28
Forwarded: not-needed
Description: Disable supression of fortify hardening flag.
 Wirh --enable-debug upstream build system removes '-02' argument
 from CFLAGS and therefore prevent fortification.
 This patch disable dropping build flags from CFLAGS.
 .
 Note: although according to blhc (see http://ruderich.org/simon/blhc/)
 fortify flag is present there are still some real false-positives
 from lintian i.e. W:hardening-no-fortify-functions.

Index: gnucash-2.6.16/configure.ac
===================================================================
--- gnucash-2.6.16.orig/configure.ac	2017-03-27 18:18:09.953052868 +0200
+++ gnucash-2.6.16/configure.ac	2017-03-27 18:19:42.455921811 +0200
@@ -731,10 +731,6 @@
   [AS_HELP_STRING([--enable-debug],[compile with debugging flags set])],
   [
   if test x$enableval = xyes; then
-     # remove any optimization flags...
-     CFLAGS=`echo ${CFLAGS} | sed -e 's,-O.,,g'`
-     # ...except for those the user wants.
-     CFLAGS="${CFLAGS} -g ${USER_OPTIMIZATION}"
      LDFLAGS="${LDFLAGS} -g"
   fi
   ])
