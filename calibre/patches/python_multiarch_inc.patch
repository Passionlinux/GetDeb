Description: Use python-config instead of sysconfig.get_python_inc(), as the latter does not work with multiarch-split include files.
Author: Martin Pitt <mpitt@debian.org>
Bug-Ubuntu: https://launchpad.net/bugs/1094246

Index: calibre-2.79.0/setup/build.py
===================================================================
--- calibre-2.79.0.orig/setup/build.py	2017-02-11 17:14:22.323470912 +0100
+++ calibre-2.79.0/setup/build.py	2017-02-11 17:14:22.319470993 +0100
@@ -155,7 +155,11 @@
     if isbsd:
         cflags.append('-pthread')
         ldflags.append('-shared')
-        cflags.append('-I'+sysconfig.get_python_inc())
+        import sys
+        config = subprocess.Popen([sys.executable + '-config', '--includes'],
+                stdout=subprocess.PIPE)
+        cflags += config.communicate()[0].strip().split()
+        assert config.returncode == 0
         ldflags.append('-lpython'+sysconfig.get_python_version())
 
     if ishaiku:
