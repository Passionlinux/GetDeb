Description: Use python-config instead of sysconfig.get_python_inc(), as the latter does not work with multiarch-split include files.
Author: Martin Pitt <mpitt@debian.org>
Bug-Ubuntu: https://launchpad.net/bugs/1094246

Index: calibre-2.78.0/setup/build.py
===================================================================
--- calibre-2.78.0.orig/setup/build.py	2017-01-27 18:05:21.662534038 +0100
+++ calibre-2.78.0/setup/build.py	2017-01-27 18:05:21.654534090 +0100
@@ -153,7 +153,11 @@
     if isbsd:
         cflags.append('-pthread')
         ldflags.append('-shared')
-        cflags.append('-I'+sysconfig.get_python_inc())
+        import sys
+        config = subprocess.Popen([sys.executable + '-config', '--includes'],
+                stdout=subprocess.PIPE)
+        cflags += config.communicate()[0].strip().split()
+        assert config.returncode == 0
         ldflags.append('-lpython'+sysconfig.get_python_version())
 
     if isosx:
